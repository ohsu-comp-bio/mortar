
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <script src="react.development.js"></script>
    <script src="react-dom.development.js"></script>
    <script src="babel.min.js"></script>
  </head>

  <body>
    <div id="root">

    </div>
    <script type="text/babel">
      fetch("/data.json").then(function(resp) {
        resp.json().then(function(data) {
          console.log(data)
          var dat = JSON.stringify(data);

          var rows = [];
          var header = [<th key="empty"></th>]
          for (var j = 0; j < data["RunIDs"].length; j++) {
            var rid = data["RunIDs"][j];
            var run = data["Runs"][rid];
            header.push(<th key={"run-th-" + rid}>{run.Name}</th>);
          }

          for (var i = 0; i < data["WorkflowIDs"].length; i++) {
            var wfid = data["WorkflowIDs"][i];
            var wf = data["Workflows"][wfid];
            var cells = [];
            cells.push(<td key={"wf-name-" + wfid}>{wf.Name}</td>);
            for (var j = 0; j < data["RunIDs"].length; j++) {
              var rid = data["RunIDs"][j];
              var run = data["Runs"][rid];
              cells.push(<td key={"run-" + rid}>{run.Running} / {run.Total}</td>);
            }
            rows.push(<tr key={"wf-" + wfid}>{cells}</tr>);
          }

          ReactDOM.render(
            (<div>
              <h3>Mortar</h3>
              <table>
                <thead><tr>{header}</tr></thead>
                <tbody>{rows}</tbody>
              </table>
            </div>),
            document.getElementById('root')
          );

        })
      })

      ReactDOM.render(
        <h3>Mortar</h3>,
        document.getElementById('root')
      );

    </script>
    <!--
      Note: this page is a great way to try React but it's not suitable for production.
      It slowly compiles JSX with Babel in the browser and uses a large development build of React.

      To set up a production-ready React build environment, follow these instructions:
      * https://reactjs.org/docs/add-react-to-a-new-app.html
      * https://reactjs.org/docs/add-react-to-an-existing-app.html

      You can also use React without JSX, in which case you can remove Babel:
      * https://reactjs.org/docs/react-without-jsx.html
      * https://reactjs.org/docs/cdn-links.html
    -->
  </body>
</html>


